var APP={};APP.load=function(){function _load(tag){return function(url){return new Promise(function(resolve,reject){var element=document.createElement(tag),parent="body",attr="src";switch(element.onload=function(){resolve(url)},element.onerror=function(){reject(url)},tag){case"script":element.async=!0;break;case"link":element.type="text/css",element.rel="stylesheet",attr="href",parent="head"}element[attr]=url,document[parent].appendChild(element)})}}return{css:_load("link"),js:_load("script"),img:_load("img")}}(),riot.mount("*"),function(){"use strict";var headerElement=document.querySelector("header");function updateNetworkStatus(){navigator.onLine?(headerElement.classList.remove("bg-error"),headerElement.classList.add("bg-gray")):(console.log("App is offline"),headerElement.classList.add("bg-error"),headerElement.classList.remove("bg-gray"))}document.addEventListener("DOMContentLoaded",function(event){navigator.onLine||updateNetworkStatus(),window.addEventListener("online",updateNetworkStatus,!1),window.addEventListener("offline",updateNetworkStatus,!1)})}(),window.Request={_xhr:function(url,options,resolve,reject){var xhr=new XMLHttpRequest;xhr.open(options.method,url),options.contentType&&xhr.setRequestHeader("Content-Type",options.contentType),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),null==reject&&(reject=function(jsonText){console.log(JSON.parse(jsonText))}),xhr.onreadystatechange=function(){if(4==xhr.readyState)switch(xhr.status){case 200:resolve(JSON.parse(xhr.responseText));break;case 401:window.location.href=BASE_URL+"/login/entrar";break;default:reject(xhr.responseText)}},xhr.send(options.data)},post:function(url,data,resolve,reject){this._xhr(url,{method:"POST",data:data,contentType:"application/json"},resolve,reject)},get:function(url,resolve,reject){this._xhr(url,{method:"GET",contentType:"application/json"},resolve,reject)}},route("/",function(){APP.load.js("tags/home.js").then(function(){riot.mount("#view","home")})}),route("/home",function(){APP.load.js("tags/home.js").then(function(){riot.mount("#view","home",{attrs:{placeholder:"Isso é um teste",maxlength:"2"}})})}),route("/incident",function(){APP.load.js("tags/incident.js").then(function(){riot.mount("#view","incident")})}),route("/clothes",function(){APP.load.js("tags/clothes.js").then(function(){Request.get("data/ladies_outerwear.json",function(json){riot.mount("#view","clothes",{items:json,uri:"ladies_outerwear"})})})}),route("/clothes/*",function(uri){APP.load.js("tags/clothes.js").then(function(){Request.get("data/"+uri+".json",function(json){riot.mount("#view","clothes",{items:json,uri:uri})},function(error){alert("Items não encontrado."),route("clothes")})})}),route.start(!0);